

###子网号 VS 网络地址 VS 主机号

子网划分并没有节约 IP 地址，实际导致可分配的 IP 地址数目减少。

证明：比如一个 C 类地址，不进行子网划分，实际可分配 IP 地址为 254 个。

现进行子网划分，假设借用 2 位主机号作为子网号，那么现在产生的子网为 01 和 10（全0全1子网号去掉），
每个子网的主机号为 6 位，则每个子网可分配的 IP 地址为 2 的 6 次方剪掉 2，即 62 台，
那么两个子网可分配的 IP 共 62*2=124 个， 那么减少的 IP 数目为：254-124=130个。

从上数据可以看出，减少了约一半的 IP 地址。既然这么浪费 IP 地址，为何我们还要使用子网划分呢？
我个人认为，这是利用子网来方便管理网络的一种措施。

很容易看出，减少这么多 IP 地址的主要原因是子网号为 00（全0）和 11（全1）的两个子网去掉了，
那为何要去掉“全0全1”的子网号呢？

不应该使用全 0 全 1 子网这个规定是源于 RFC950 标准，但后来 RFC950 在 RFC1878 中被废止了。

看看 RFC950 提到的原因：

假设我们有一个网络：192.168.0.0/24，我们现在需要两个子网，那么按照 RFC950，应该使用 /26 而不是 /25，
得到两个可以使用的子网 192.168.0.64 和 192.168.0.128

* 对于192.168.0.0/24，网络地址是192.168.0.0，广播地址是192.168.0.255
* 对于192.168.0.0/26，网络地址是192.168.0.0，广播地址是192.168.0.63
* 对于192.168.0.64/26，网络地址是192.168.0.64，广播地址是192.168.0.127
* 对于192.168.0.128/26，网络地址是192.168.0.128，广播地址是192.168.0.191
* 对于192.168.0.192/26，网络地址是192.168.0.192，广播地址是192.168.0.255

你可以看出来，对于第一个子网，网络地址和主网络的网络地址是重叠的，对于最后一个子网，广播地址和主网络
的广播地址也是重叠的。这样的重叠将导致极大的混乱。比如，一个发往 192.168.0.255 的广播是发给主网络的
还是子网的？这就是为什么在当时不建议使用全 0 和全 1 子网。

然而，人们认识到子网划分的 IP 地址浪费严重，后来 IETF 就研究出了其他一些技术，比如可变长子网掩码 VLSM，
该技术是在子网上进一步划分子网，可提高 IP 地址资源的利用率；后来在此基础上研究出了无类别域间路由CIDR，
即消除了传统的 A/B/C 等分类以及划分子网，才是采用网络前缀和主机号的方式来分配 IP 地址，这使得 IP 地址
的利用率更好。这两者的具体技术暂时不阐述。

就目前来说，现在可以使用全 0 和全 1 子网。但我们现在学习时，还强调子网划分时要去掉全 0 全 1，
这是何道理呢？我个人认为：

* 目前有些网络建设较早，设备也不更新，老设备可能不支持 CIDR，那么也就不支持全 0 全 1 的子网了。
* 我们建企业网（单位网络）时，一般是使用私有地址来分配内部主机，小企业使用 C 类的 192.168.0.0 网络，
中型企业使用172.16.0.0（私有部分）网络，如果还不够用，还有 10.0.0.0 网络。

