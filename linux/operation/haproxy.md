##HAProxy 调研

* 版本: HAProxy 1.5


##特性

##负载均衡模式

###完成一次请求之后, 代理与客户端既与客户端保持连接又与服务端保持连接

###完成一次请求之后, 代理与客户端断开连接, 但服务端保持连接

###完成一次请求之后, 代理与客户端保持连接, 与服务端断开连接

###完成一次请求之后, 代理与客户端和服务端都断开连接


##集群功能

##负载均衡算法

####静态轮询与权重

不支持动态调整(权重不可更改), 性能更好

####轮询与权重

支持动态调整权重

####最少连接数

支持动态调整, 适合长连接业务, 不适合短连接

####最少服务器

从第一台服务器开始, 每个后台服务端到达其处理连接上限(maxconn)后, 使用下一个后台服务端,
如果没有设置 maxconn 参数值则没有用, 适合长连接的业务 如 RDP, IMAP.

####源IP 哈希

计算源 IP 哈希, 然后根据权重分配连接给后端服务器. 在后端服务器数量发生变化(增加或删除)
的情况下, 仍然可以保证同一客户端请求始终到同一后端服务器.

####URL 哈希

根据 URL 的(长度可配置)计算哈希, 然后根据权重分配连接给后端服务器.在后端服务器数量发生
变化(增加或删除) 的情况下, 仍然可以保证同一客户端请求始终到同一后端服务器.

####URL参数哈希

根据 URL 的参数(长度可配置)计算哈希, 然后根据权重分配连接给后端服务器.在后端服务器数量发生
变化(增加或删除) 的情况下, 仍然可以保证同一客户端请求始终到同一后端服务器.

####HTTP 头哈希

根据 HTTP 头(长度可配置)计算哈希, 然后根据权重分配连接给后端服务器.在后端服务器数量发生
变化(增加或删除) 的情况下, 仍然可以保证同一客户端请求始终到同一后端服务器.


##压缩

如果请求支持压缩, 如果后端服务器支持压缩, 负载均衡器将不会进行压缩, 如果后端服务器不支持压缩, 负载均衡将代替后端服务器对内容压缩

仅支持 HTTP1.1

##cookie

重写
插入

##其它关键特性

* 支持将一个资源池绑定到特定处理器集合
* 健康检查
* session 支持超时后自动删除















注:

    配置文件支持环境变量, 是否可以通过更改环境变量来更改权限.


